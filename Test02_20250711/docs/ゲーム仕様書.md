# 弾幕シューティングゲーム 仕様書

## 概要
HTML5 Canvasを使用した弾幕シューティングゲームです。プレイヤーは宇宙船を操作して、画面上部から降ってくる弾幕を避け続け、生存時間を競います。

## ゲーム情報
- **ゲーム名**: 弾幕シューティング
- **開発言語**: HTML5, CSS3, JavaScript
- **キャンバスサイズ**: 720 × 720 ピクセル
- **ゲームタイプ**: 弾幕シューティング・サバイバル

## ゲーム要素

### プレイヤー（宇宙船）
- **初期位置**: キャンバス中央（x: 360, y: 600）
- **サイズ**: 幅20ピクセル × 高さ20ピクセル
- **色**: #00FF00（緑色）
- **移動範囲**: キャンバス全体（上下左右の境界内）
- **形状**: 円形
- **エフェクト**: ゲーム開始前、マウスが自機の近く（半径40ピクセル以内）にあるとき、自機が緑と黄色で滑らかに点滅し、サイズも滑らかに変化する

### 弾幕
- **弾のサイズ**: 半径3ピクセル
- **弾の色**: #FF0000（赤色）
- **弾の速度**: 3-5ピクセル/フレーム
- **弾の生成**: 画面上部からランダムな位置で生成
- **弾のパターン**: 直線下降、螺旋、円形など様々なパターン
- **弾の数**: 時間経過とともに増加

## 操作方法

### マウス操作
- **マウス移動**: 宇宙船をマウスカーソルに追従

## ゲームルール

### ゲーム開始
- 初期状態ではゲームが停止状態
- プレイヤー自機の近く（半径40ピクセル以内）をクリックでゲーム開始
- 開始前は「Click near the player to Start」メッセージを表示
- マウスが自機の近くにあるとき、自機が点滅・拡大縮小する

### 弾幕の物理演算
1. **弾の移動**
   - 様々なパターンで移動（直線、螺旋、円形など）
   - 画面外に出ると消滅
   - 時間経過とともに速度と数が増加

2. **衝突判定**
   - プレイヤーと弾が接触するとゲームオーバー
   - 円形の当たり判定を使用

### 弾幕パターン
1. **直線下降**
   - 画面上部から真っ直ぐ下に降ってくる弾

2. **螺旋パターン**
   - 螺旋状に回転しながら下降する弾

3. **円形パターン**
   - 円を描くように移動する弾

4. **ランダムパターン**
   - ランダムな方向に移動する弾

### ゲーム終了条件

#### 敗北条件
- プレイヤーが弾に接触
- メッセージ: "GAME OVER. Survival Time: [時間]"
- ゲームが自動的にリセット

## スコアシステム
- **初期スコア**: 0秒
- **得点方法**: 生存時間（秒）
- **表示形式**: 0.01秒単位で表示
- **ハイスコア**: 最高生存時間はブラウザのlocalStorageに保存され、画面上に金色で表示される

## ゲーム状態管理

### 状態フラグ
- **gameRunning**: ゲームの実行状態を管理
  - `false`: ゲーム停止（開始前または終了後）
  - `true`: ゲーム実行中

### リセット機能
`resetGame()`関数により以下がリセットされます：
- プレイヤー位置を初期位置に戻す
- スコアを0秒にリセット
- 全ての弾幕を消去
- ゲーム状態を停止に設定

## 技術仕様

### フレームレート
- `requestAnimationFrame`を使用した60FPS描画
- ゲーム停止時も描画ループは継続（メッセージ表示のため）

### 衝突判定
- **プレイヤー-弾**: 円形判定（距離計算）

### 弾幕管理システム
```javascript
// 弾幕配列
let bullets = [];

// 弾幕生成タイマー
let bulletSpawnTimer = 0;
let bulletSpawnInterval = 30; // フレーム数

// 弾幕パターン
const bulletPatterns = ['straight', 'spiral', 'circle', 'random'];
```

## ファイル構成
```
Test02_20250711/
├── index.html      # メインHTMLファイル
├── style.css       # スタイルシート
├── script.js       # ゲームロジック
└── ゲーム仕様書.md # この仕様書
```

## 今後の拡張可能性
- 音響効果の追加
- パワーアップアイテムの実装（連続発射、高速弾など）
- 複数レベルの追加
- モバイル対応（タッチ操作）
- 難易度設定（敵の数、弾の速度など）
- ボス敵の実装
- エフェクト（爆発、パーティクル）の追加
- ハイスコアのランキング化やリセット機能 