# ブロック崩しゲーム 仕様書

## 概要
HTML5 Canvasを使用したクラシックなブロック崩しゲームです。プレイヤーはパドルを操作してボールを反射させ、画面上部のブロックを全て破壊することを目指します。

## ゲーム情報
- **ゲーム名**: ブロック崩し
- **開発言語**: HTML5, CSS3, JavaScript
- **キャンバスサイズ**: 480 × 320 ピクセル
- **ゲームタイプ**: アクション・パズル

## ゲーム要素

### ボール
- **初期位置**: キャンバス中央下部（x: 240, y: 290）
- **サイズ**: 半径10ピクセル
- **色**: #0095DD（青色）
- **初期速度**: 1ピクセル/フレーム
- **初期方向**: 左上方向（dx: 1, dy: -1）

### パドル
- **サイズ**: 幅75ピクセル × 高さ10ピクセル
- **初期位置**: キャンバス中央下部
- **色**: #0095DD（青色）
- **移動速度**: 7ピクセル/フレーム
- **移動範囲**: キャンバス左右端まで

### ブロック
- **配置**: 5列 × 3行（合計15個）
- **サイズ**: 幅75ピクセル × 高さ20ピクセル
- **間隔**: 10ピクセル（パディング）
- **開始位置**: 左上から30ピクセルオフセット
- **色**: #0095DD（青色）

## 操作方法

### キーボード操作
- **右矢印キー**: パドルを右に移動
- **左矢印キー**: パドルを左に移動

### マウス操作
- **マウス移動**: パドルをマウスカーソルに追従
- **クリック**: ゲーム開始

## ゲームルール

### ゲーム開始
- 初期状態ではゲームが停止状態
- キャンバスをクリックするとゲーム開始
- 開始前は「Click to Start」メッセージを表示

### ボールの物理演算
1. **壁での反射**
   - 左右の壁に当たると水平方向の速度を反転
   - 上部の壁に当たると垂直方向の速度を反転

2. **パドルでの反射**
   - パドルに当たると垂直方向の速度を反転
   - パドルの当たった位置によって角度が変化
   - パドル中央: 垂直反射
   - パドル端部: 最大±75度の角度で反射
   - 下向きの動きは完全に防止

3. **ブロックとの衝突**
   - ブロックに当たると垂直方向の速度を反転
   - ブロックは破壊される
   - スコアが1点加算

### ゲーム終了条件

#### 勝利条件
- 全てのブロック（15個）を破壊
- メッセージ: "YOU WIN, CONGRATULATIONS!"
- ゲームが自動的にリセット

#### 敗北条件
- ボールがパドルを通過して画面下部に到達
- メッセージ: "GAME OVER. Your score: [スコア]"
- ゲームが自動的にリセット

## スコアシステム
- **初期スコア**: 0点
- **得点方法**: ブロック1個破壊につき1点
- **最大スコア**: 15点（全ブロック破壊時）

## ゲーム状態管理

### 状態フラグ
- **gameRunning**: ゲームの実行状態を管理
  - `false`: ゲーム停止（開始前または終了後）
  - `true`: ゲーム実行中

### リセット機能
`resetGame()`関数により以下がリセットされます：
- ボール位置を初期位置に戻す
- ボール速度を初期値に戻す
- パドル位置を中央に戻す
- スコアを0にリセット
- ブロックを全て復活
- ゲーム状態を停止に設定

## 技術仕様

### フレームレート
- `requestAnimationFrame`を使用した60FPS描画
- ゲーム停止時も描画ループは継続（メッセージ表示のため）

### 衝突判定
- **ボール-ブロック**: 矩形判定
- **ボール-パドル**: 矩形判定 + 位置による角度計算
- **ボール-壁**: 座標による境界判定

### 角度計算システム
```javascript
// パドル位置による角度調整
const hitPosition = (x - paddleX) / paddleWidth; // 0.0-1.0
const maxAngleAdjustment = 80; // 最大角度調整
const angleAdjustment = (hitPosition - 0.5) * 2 * maxAngleAdjustment;
```

## ファイル構成
```
Test01_20250711/
├── index.html      # メインHTMLファイル
├── style.css       # スタイルシート
├── script.js       # ゲームロジック
└── ゲーム仕様書.md # この仕様書
```

## 今後の拡張可能性
- 音響効果の追加
- パワーアップアイテムの実装
- 複数レベルの追加
- ハイスコア機能
- モバイル対応（タッチ操作）
- 難易度設定（ボール速度、ブロック数など） 