# 座標パズルゲーム仕様（現時点）

## 用語
- **座標**  
  ゲーム内の位置を表す `(X, Y)` のペア。常に整数。

- **原点**  
  1ラン開始時の座標。常に `(0,0)`。

- **ターゲット座標**  
  到達を目指すゴールの座標 `(gx, gy)`。

- **関数**  
  選択して座標を変化させるカード。1回の手番でXとYを同時に更新する。

- **関数タイプ**  
  関数の動作種別（加算・減算・乗算・除算・指数系・XY入れ替え系など）。

- **レアリティ**  
  関数の希少度。効果は同一でも、ランダムモードで使用時に報酬倍率が付く。

- **ハンド**  
  1ランで使用できる関数の回数。固定で5回。

- **チャレンジ**  
  （旧 試験モード）  
  あらかじめ設定されたターゲット座標を目指すモード。完全一致でクリア。  
  スコアは存在せず、到着すればOK。失敗してもペナルティなし。

- **ランダムハント**  
  （旧 ランダムモード）  
  ターゲット座標がランダム生成されるモード。  
  完全一致できなくても、近いほどお金を獲得。  
  レアリティ付き関数を使うと最終報酬に倍率がかかる。

- **関数ショップ**  
  関数を購入できる画面。30分ごとに商品が切り替わる。

- **関数ガチャ**  
  関数をランダム入手できるシステム。詳細は未定。

---

## 関数カードの仕様
- **形式**：`X<演算> <数> , Y<演算> <数>`  
  - 例：`X+ 3 , Y/ 9` / `X- 6 , Y* 5` / `X^ 2 , Y- 1`  
  - 区切りはコンマ＋半角スペース  
  - 演算子：`+`（加算）、`-`（減算）、`*`（乗算）、`/`（除算）、`^`（指数）  
  - XとYは文字色を付けて強調（X=赤、Y=青）、その他は黒
- 1ラン中の再使用は不可（同じ関数を複数回使えない）
- XとYは別の演算タイプを持つことができる（例：`X* 3 , Y- 2`）
- 除算や指数演算で小数が出る場合は四捨五入して整数化（ルールとして説明するが表記には含めない）

---

## モード概要

### チャレンジ
- 固定ターゲット座標
- 5ハンド以内で完全一致すればクリア
- 関数の使用制限なし（現時点）
- ステージが進むほどターゲット座標が遠くなり難易度上昇
- 失敗してもペナルティなし、何度でも挑戦可

### ランダムハント
- ターゲット座標はランダム生成
- 完全一致で最大報酬
- 未達でも距離に応じて報酬
- レアリティ付き関数を使用すると最終報酬に倍率

---

## ショップ / ガチャ
- 関数ショップ：30分ごとに商品入れ替え
- 関数ガチャ：詳細未定
- 価格や報酬計算式は後で決定

---

## 未確定項目（TBD）
- ランダムハントの報酬計算式
- ショップの価格計算式
- ガチャの詳細仕様（確率、天井など）
